<!DOCTYPE html>
<html>
  <head>
    <title>Title</title>
    <meta charset="utf-8">
    <style>
      @import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);
      
      body { font-family: 'Droid Serif'; }
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: normal;
      }
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }
      
    </style>
    <link rel="stylesheet" href="/style.css">
  </head>
  <body>

    <textarea id="source">

class: center, middle

# Zmutowany .NET
.footnote[4Developers - 08.11.2022]

---
class: center, middle


# Disclaimer

(a tak naprawdę dwa)

---

# Kim ja jestem?

.left-column-33[<div>
  <img src="/assets/moje500x500.jpg" class="bio myphoto">
</div>]
.left-column-66[<div>
  <div>.NET Developer</div>

</div>]


---

# Agenda

TODO

---
class: center, middle

# Quiz

Kto słyszał o testach mutacyjnych?

---

class: center, middle

# Quiz

Kto korzystał z testów mutacyjnych?

---
class: center, middle

# Po co są nam testy mutacyjne?

???

Celem Testowania Mutacyjnego jest zapewnienie jakości przypadków testowych. 

Sprawdzają one czy nasze testy są w stanie wykryć zmiany (mutacje) kodu źródłowego.

---

class: center, middle
# Jak to się dzieje?

???

Zacznijmy najpierw od tego jakie są rodzaje mutacji, a następnie spróbujemy odpowiedzieć sobie na pytanie czym są mutacje.
---

# Przykładowe mutacje - Operatory równości
<table class="exampleMutations">
  <tr>
    <th>Oryginał</th>
    <th>Zmutowany</th>
  </tr>
  <tr>
    <td>></td>
    <td><</td>
  </tr>
  <tr>
    <td>></td>
    <td>>=</td>
  </tr>
  <tr>
    <td>>=</td>
    <td><</td>
  </tr>
  <tr>
    <td>>=</td>
    <td>></td>
  </tr>
  <tr>
    <td><</td>
    <td>></td>
  </tr>
  <tr>
    <td><</td>
    <td><=</td>
  </tr>
  <tr>
    <td><=</td>
    <td>></td>
  </tr>
  <tr>
    <td><=</td>
    <td><</td>
  </tr>
  <tr>
    <td>==</td>
    <td>!=</td>
  </tr>
  <tr>
    <td>!=</td>
    <td>==</td>
  </tr>
</table>

.source[Źródło: https://stryker-mutator.io/docs/stryker-net/mutations/]
---

# Przykładowe mutacje - Metody Linq
<table class="exampleMutations">
  <tr>
    <th>Oryginał</th>
    <th>Zmutowany</th>
  </tr>
  <tr>
    <td>SingleOrDefault()</td>
    <td>Single()</td>
  </tr>
  <tr>
    <td>Single()</td>
    <td>SingleOrDefault()</td>
  </tr>
  <tr>
    <td>OrderBy()</td>
    <td>OrderByDescending()</td>
  </tr>
  <tr>
    <td>AsEnumerable()</td>
    <td>Reverse()</td>
  </tr>
  <tr>
    <td>Any()</td>
    <td>All()</td>
  </tr>
  <tr>
    <td>Take()</td>
    <td>Skip()</td>
  </tr>
  <tr>
    <td>...</td>
    <td>...</td>
  </tr>

</table>

.source[Źródło: https://stryker-mutator.io/docs/stryker-net/mutations/]
---

# Przykładowe mutacje - Literały (String)
<table class="exampleMutations">
  <tr>
    <th>Oryginał</th>
    <th>Zmutowany</th>
  </tr>
  <tr>
    <td>"foo"</td>
    <td>""</td>
  </tr>
  <tr>
    <td>""</td>
    <td>"Stryker was here!"</td>
  </tr>
  <tr>
    <td>$"foo {bar}"</td>
    <td>$""</td>
  </tr>
  <tr>
    <td>@"foo"</td>
    <td>@""</td>
  </tr>
  <tr>
    <td>string.Empty</td>
    <td>"Stryker was here!"</td>
  </tr>

</table>

.source[Źródło: https://stryker-mutator.io/docs/stryker-net/mutations/]
---
class: center, middle

# To zdefinujmy sobie test mutacyjny

---
class: center, middle

# To zdefinujmy sobie test mutacyjny

Mutacje to drobne, ale przemyślane zmiany w kodzie, które mają sprawdzić czy nasze testy dobrze testują nasz kod.

Sprawdzamy wyników - **false-positive**

---
class: center, middle

# A co z pokryciem kodu?

---
class: center, middle

# A co z pokryciem kodu?

Sprawdzanie pokrycia kody nie powie Ci wszystkiego o efektywności twoich testów.

???

Wyobraźmy sobie kanapkę z dżemem. 

Sprawdzanie pokrycia powie Ci, że 80% kanapki jest pokryte dżemem, a test mutacyjne powiedzą Ci, że jest to dżem truskawkowy, a nie brzoskwiniowy…

---
class: center, middle

# Już prawie live coding
Jeszcze tylko musimy sobie wytłumaczyć kilka słówek

???

Nie każdy to lubi, ale pozwoli nam to łatwiej przebrnąć przez demo.

---

# Mutant

<img class="mutant" src="/assets/mutant.png" >

---

# Mutant

Jest to po prostu zmieniona wersja kodu źródłowego.

Po przepuszczeniu danych testowych przez mutanta - test powinien nam zwrócić **inne** wyniki niż oryginalny kod źródłowy.

---

# Survived Mutants (żywe mutanty)

Są to mutanty, które wciąż żyją po uruchomieniu danych testowych przez oryginalne i zmutowane warianty kodu źródłowego. 

Te muszą zostać zabite.

.mutantFailed[**(Test failed)**]

.center[<img class="survivedMutant" src="/assets/survivedMutants.gif">]

---

# Mutanty zabite

Są to mutacje, które są zabijane po testowaniu mutacji. 

Otrzymujemy je, gdy otrzymujemy różne wyniki z oryginalnych i zmutowanych wersji kodu źródłowego.

.mutantSucceed[**(Test succeed)**]

---

# Mutanty równoważne

Są one ściśle związane z żywymi mutantami, z tym, że, są one "żywe" nawet po uruchomieniu przez nie danych testowych. 

To, co odróżnia je od innych, to fakt, że mają takie samo znaczenie jak oryginalny kod źródłowy, nawet jeśli mogą mieć inną składnię.

Takie mutacje są ignorowane.

---

# Wynik mutacji

Jest to wynik oparty na liczbie mutantów danego typu:

.center[<img src="/assets/mutationScore.png"/>]

Naszym celem powinno być osiągnięcie wysokiego wyniku mutacji.

???

Mutacje równoważne nie są brane pod uwagę przy obliczaniu wyniku mutacji. 

Osiągnięcie 100% powinno być naszym calem, ale nie jest konieczne. To jak z pokryciem kodu. Im więcej tym lepiej, ale realne jest 80-90%.
---
class: center, middle

# Więc co oznacza, że zabijamy mutanta?

???

Pytanie do publiki

Kiedy zmieniamy część programu poprzez testy mutacyjne, tworzymy alternatywną wersję  aplikacji, która jest nazywana mutantem. 
Następnie testy sprawdzają to, a jeśli zestaw testów odrzuca mutanta (co, mamy nadzieję, robi), mówimy, że zabił mutanta.

---
class: center, middle

# DEMO

---
    </textarea>
    <script src="/remark.js">
    </script>
    <script>
      var slideshow = remark.create();
    </script>
  </body>
</html>